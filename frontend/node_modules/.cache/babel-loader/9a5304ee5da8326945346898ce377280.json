{"ast":null,"code":"var _jsxFileName = \"/Users/liuyanjun/therapy_agent/frontend/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = ({\n  onLogin,\n  onRegister\n}) => {\n  _s();\n\n  const [isLogin, setIsLogin] = useState(true);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const apiBaseUrl = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      if (isLogin) {\n        // Login logic\n        const response = await axios.post(`${apiBaseUrl}/api/login`, {\n          user_info: {\n            username,\n            password\n          }\n        });\n\n        if (response.data.success && response.data.validID) {\n          onLogin({\n            userID: response.data.userID,\n            sessionID: response.data.sessionID,\n            token: response.data.token,\n            username: username,\n            model_prompt: response.data.model_prompt,\n            choices: response.data.choices\n          });\n        } else {\n          setError(response.data.error || '登录失败');\n        }\n      } else {\n        // Register logic\n        const response = await axios.post(`${apiBaseUrl}/api/register`, {\n          user_info: {\n            username,\n            password,\n            email\n          }\n        });\n\n        if (response.data.success) {\n          // Auto-login after registration\n          const loginResponse = await axios.post(`${apiBaseUrl}/api/login`, {\n            user_info: {\n              username,\n              password\n            }\n          });\n\n          if (loginResponse.data.success && loginResponse.data.validID) {\n            onRegister({\n              userID: loginResponse.data.userID,\n              sessionID: loginResponse.data.sessionID,\n              token: loginResponse.data.token,\n              username: username\n            });\n          }\n        } else {\n          setError(response.data.error || '注册失败');\n        }\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      console.error('Authentication error:', error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || '认证失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"floating-shapes\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand-logo\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"48\",\n            height: \"48\",\n            viewBox: \"0 0 48 48\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"24\",\n              cy: \"24\",\n              r: \"20\",\n              fill: \"url(#brainGradient)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M24 12C18 12 14 16 14 22C14 26 16 28 18 28C20 28 22 26 22 24C22 22 20 20 18 20\",\n              stroke: \"white\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M24 12C30 12 34 16 34 22C34 26 32 28 30 28C28 28 26 26 26 24C26 22 28 20 30 20\",\n              stroke: \"white\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M20 28C20 30 22 32 24 32C26 32 28 30 28 28\",\n              stroke: \"white\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"20\",\n              cy: \"22\",\n              r: \"1.5\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"28\",\n              cy: \"22\",\n              r: \"1.5\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n              children: /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                id: \"brainGradient\",\n                x1: \"24\",\n                y1: \"4\",\n                x2: \"24\",\n                y2: \"44\",\n                gradientUnits: \"userSpaceOnUse\",\n                children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                  stopColor: \"#6366f1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                  offset: \"1\",\n                  stopColor: \"#8b5cf6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"brand-title\",\n          children: \"MindGuide\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"brand-tagline\",\n          children: \"\\u60A8\\u7684\\u5FC3\\u7075\\u5065\\u5EB7\\u4F19\\u4F34\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: isLogin ? '欢迎回来' : '加入我们'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"\\u7528\\u6237\\u540D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            required: true,\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u7528\\u6237\\u540D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-icon\",\n            children: \"\\uD83D\\uDC64\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"\\u5BC6\\u7801\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u5BC6\\u7801\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-icon\",\n            children: \"\\uD83D\\uDD12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), !isLogin && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"\\u90AE\\u7BB1\\u5730\\u5740\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u90AE\\u7BB1\\uFF08\\u53EF\\u9009\\uFF09\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-icon\",\n            children: \"\\uD83D\\uDCE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"submit-btn\",\n          children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this), loading ? '处理中...' : isLogin ? '开始心灵之旅' : '开启新篇章']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"switch-mode\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [isLogin ? '还没有账号？' : '已有账号？', /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"switch-btn\",\n            onClick: () => {\n              setIsLogin(!isLogin);\n              setError('');\n            },\n            children: isLogin ? '立即注册' : '立即登录'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"demo-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u6F14\\u793A\\u8D26\\u53F7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uD83D\\uDCDD \\u7528\\u6237\\u540D: user1 \\u5230 user30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uD83D\\uDD11 \\u5BC6\\u7801: \\u67E5\\u770B\\u540E\\u7AEF\\u4EE3\\u7801\\u4E2D\\u7684\\u5BC6\\u7801\\u5217\\u8868\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u2728 \\u6216\\u8005\\u6CE8\\u518C\\u65B0\\u8D26\\u53F7\\u8FDB\\u884C\\u6D4B\\u8BD5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"/zVjeBX3qLgePVMD7GSGfYXB2VE=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/liuyanjun/therapy_agent/frontend/src/Login.js"],"names":["React","useState","axios","Login","onLogin","onRegister","isLogin","setIsLogin","username","setUsername","password","setPassword","email","setEmail","error","setError","loading","setLoading","apiBaseUrl","process","env","REACT_APP_API_BASE_URL","handleSubmit","e","preventDefault","response","post","user_info","data","success","validID","userID","sessionID","token","model_prompt","choices","loginResponse","console","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './Login.css';\n\nconst Login = ({ onLogin, onRegister }) => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const apiBaseUrl = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      if (isLogin) {\n        // Login logic\n        const response = await axios.post(`${apiBaseUrl}/api/login`, {\n          user_info: { username, password }\n        });\n\n        if (response.data.success && response.data.validID) {\n          onLogin({\n            userID: response.data.userID,\n            sessionID: response.data.sessionID,\n            token: response.data.token,\n            username: username,\n            model_prompt: response.data.model_prompt,\n            choices: response.data.choices\n          });\n        } else {\n          setError(response.data.error || '登录失败');\n        }\n      } else {\n        // Register logic\n        const response = await axios.post(`${apiBaseUrl}/api/register`, {\n          user_info: { username, password, email }\n        });\n\n        if (response.data.success) {\n          // Auto-login after registration\n          const loginResponse = await axios.post(`${apiBaseUrl}/api/login`, {\n            user_info: { username, password }\n          });\n\n          if (loginResponse.data.success && loginResponse.data.validID) {\n            onRegister({\n              userID: loginResponse.data.userID,\n              sessionID: loginResponse.data.sessionID,\n              token: loginResponse.data.token,\n              username: username\n            });\n          }\n        } else {\n          setError(response.data.error || '注册失败');\n        }\n      }\n    } catch (error) {\n      console.error('Authentication error:', error);\n      setError(error.response?.data?.error || '认证失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      {/* 浮动几何形状 */}\n      <div className=\"floating-shapes\">\n        <div className=\"shape\"></div>\n        <div className=\"shape\"></div>\n        <div className=\"shape\"></div>\n      </div>\n\n      <div className=\"login-form\">\n        {/* 品牌标识区域 */}\n        <div className=\"brand-section\">\n          <div className=\"brand-logo\">\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"24\" cy=\"24\" r=\"20\" fill=\"url(#brainGradient)\"/>\n              <path d=\"M24 12C18 12 14 16 14 22C14 26 16 28 18 28C20 28 22 26 22 24C22 22 20 20 18 20\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n              <path d=\"M24 12C30 12 34 16 34 22C34 26 32 28 30 28C28 28 26 26 26 24C26 22 28 20 30 20\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n              <path d=\"M20 28C20 30 22 32 24 32C26 32 28 30 28 28\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n              <circle cx=\"20\" cy=\"22\" r=\"1.5\" fill=\"white\"/>\n              <circle cx=\"28\" cy=\"22\" r=\"1.5\" fill=\"white\"/>\n              <defs>\n                <linearGradient id=\"brainGradient\" x1=\"24\" y1=\"4\" x2=\"24\" y2=\"44\" gradientUnits=\"userSpaceOnUse\">\n                  <stop stopColor=\"#6366f1\"/>\n                  <stop offset=\"1\" stopColor=\"#8b5cf6\"/>\n                </linearGradient>\n              </defs>\n            </svg>\n          </div>\n          <h1 className=\"brand-title\">MindGuide</h1>\n          <p className=\"brand-tagline\">您的心灵健康伙伴</p>\n        </div>\n\n        <h2>{isLogin ? '欢迎回来' : '加入我们'}</h2>\n        \n        {error && <div className=\"error-message\">{error}</div>}\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">用户名</label>\n            <input\n              type=\"text\"\n              id=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              required\n              placeholder=\"请输入您的用户名\"\n            />\n            <div className=\"input-icon\">👤</div>\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">密码</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              placeholder=\"请输入您的密码\"\n            />\n            <div className=\"input-icon\">🔒</div>\n          </div>\n\n          {!isLogin && (\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">邮箱地址</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"请输入您的邮箱（可选）\"\n              />\n              <div className=\"input-icon\">📧</div>\n            </div>\n          )}\n\n          <button type=\"submit\" disabled={loading} className=\"submit-btn\">\n            {loading && <div className=\"loading-spinner\"></div>}\n            {loading ? '处理中...' : (isLogin ? '开始心灵之旅' : '开启新篇章')}\n          </button>\n        </form>\n\n        <div className=\"switch-mode\">\n          <p>\n            {isLogin ? '还没有账号？' : '已有账号？'}\n            <button \n              type=\"button\" \n              className=\"switch-btn\"\n              onClick={() => {\n                setIsLogin(!isLogin);\n                setError('');\n              }}\n            >\n              {isLogin ? '立即注册' : '立即登录'}\n            </button>\n          </p>\n        </div>\n\n        <div className=\"demo-info\">\n          <h4>演示账号</h4>\n          <p>📝 用户名: user1 到 user30</p>\n          <p>🔑 密码: 查看后端代码中的密码列表</p>\n          <p>✨ 或者注册新账号进行测试</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}