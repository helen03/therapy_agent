<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="1200" viewBox="0 0 800 1200">
  <!-- 系统架构流程图 -->
  <g transform="translate(400, 100)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">SATbot系统架构流程图</text>
    <!-- 客户端 -->
    <rect x="-300" y="0" width="150" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-225" y="35" font-family="Arial" font-size="14" text-anchor="middle">客户端</text>
    <text x="-225" y="55" font-family="Arial" font-size="12" text-anchor="middle">(React前端)</text>
    
    <!-- API网关 -->
    <rect x="-100" y="0" width="150" height="60" rx="10" fill="#fff2cc" stroke="#faad14" stroke-width="2"/>
    <text x="-25" y="35" font-family="Arial" font-size="14" text-anchor="middle">API网关</text>
    <text x="-25" y="55" font-family="Arial" font-size="12" text-anchor="middle">(Flask后端)</text>
    
    <!-- 决策引擎 -->
    <rect x="100" y="0" width="180" height="60" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="190" y="35" font-family="Arial" font-size="14" text-anchor="middle">决策引擎</text>
    <text x="190" y="55" font-family="Arial" font-size="12" text-anchor="middle">(ModelDecisionMaker)</text>
    
    <!-- 数据存储 -->
    <rect x="330" y="0" width="150" height="60" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="405" y="35" font-family="Arial" font-size="14" text-anchor="middle">数据存储</text>
    <text x="405" y="55" font-family="Arial" font-size="12" text-anchor="middle">(数据库)</text>
    
    <!-- 连接线 -->
    <line x1="-150" y1="30" x2="-100" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="50" y1="30" x2="100" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="280" y1="30" x2="330" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="405" y1="60" x2="405" y2="100" stroke="#333" stroke-width="2"/>
    <line x1="405" y1="100" x2="-225" y2="100" stroke="#333" stroke-width="2"/>
    <line x1="-225" y1="100" x2="-225" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <!-- 详细对话流程图 -->
  <g transform="translate(400, 280)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">对话流程图</text>
    
    <!-- 开始 -->
    <circle cx="-300" cy="0" r="30" fill="#fff1f0" stroke="#ff4d4f" stroke-width="2"/>
    <text x="-300" y="5" font-family="Arial" font-size="14" text-anchor="middle">开始</text>
    
    <!-- 用户输入 -->
    <rect x="-180" y="-30" width="120" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-120" y="10" font-family="Arial" font-size="14" text-anchor="middle">用户输入</text>
    
    <!-- 情感分析 -->
    <rect x="0" y="-30" width="120" height="60" rx="10" fill="#fff2cc" stroke="#faad14" stroke-width="2"/>
    <text x="60" y="10" font-family="Arial" font-size="14" text-anchor="middle">情感分析</text>
    
    <!-- 决策逻辑 -->
    <rect x="180" y="-30" width="120" height="60" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="240" y="10" font-family="Arial" font-size="14" text-anchor="middle">决策逻辑</text>
    
    <!-- 生成响应 -->
    <rect x="360" y="-30" width="120" height="60" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="420" y="10" font-family="Arial" font-size="14" text-anchor="middle">生成响应</text>
    
    <!-- 结束 -->
    <circle cx="420" cy="100" r="30" fill="#fff1f0" stroke="#ff4d4f" stroke-width="2"/>
    <text x="420" y="105" font-family="Arial" font-size="14" text-anchor="middle">结束</text>
    
    <!-- 连接线 -->
    <line x1="-270" y1="0" x2="-180" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-60" y1="0" x2="0" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="120" y1="0" x2="180" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="300" y1="0" x2="360" y2="0" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="420" y1="30" x2="420" y2="70" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="420" y1="130" x2="-300" y2="130" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
    <line x1="-300" y1="130" x2="-300" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <!-- ModelDecisionMaker内部流程图 -->
  <g transform="translate(400, 500)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">ModelDecisionMaker内部流程</text>
    
    <!-- 初始化 -->
    <rect x="-350" y="0" width="120" height="60" rx="10" fill="#ffe7ba" stroke="#faad14" stroke-width="2"/>
    <text x="-290" y="35" font-family="Arial" font-size="14" text-anchor="middle">初始化</text>
    <text x="-290" y="55" font-family="Arial" font-size="12" text-anchor="middle">(__init__)</text>
    
    <!-- 情感分析 -->
    <rect x="-200" y="0" width="120" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-140" y="35" font-family="Arial" font-size="14" text-anchor="middle">情感分析</text>
    <text x="-140" y="55" font-family="Arial" font-size="12" text-anchor="middle">(save_emotion)</text>
    
    <!-- 确定下一步 -->
    <rect x="-50" y="0" width="140" height="60" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="20" y="35" font-family="Arial" font-size="14" text-anchor="middle">确定下一步</text>
    <text x="20" y="55" font-family="Arial" font-size="12" text-anchor="middle">(determine_next_choice)</text>
    
    <!-- 生成提示 -->
    <rect x="120" y="0" width="120" height="60" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="180" y="35" font-family="Arial" font-size="14" text-anchor="middle">生成提示</text>
    <text x="180" y="55" font-family="Arial" font-size="12" text-anchor="middle">(get_model_prompt)</text>
    
    <!-- 练习推荐 -->
    <rect x="270" y="0" width="120" height="60" rx="10" fill="#fff0f6" stroke="#eb2f96" stroke-width="2"/>
    <text x="330" y="35" font-family="Arial" font-size="14" text-anchor="middle">练习推荐</text>
    <text x="330" y="55" font-family="Arial" font-size="12" text-anchor="middle">(get_exercise_intro)</text>
    
    <!-- 连接线 -->
    <line x1="-230" y1="30" x2="-200" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-80" y1="30" x2="-50" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="90" y1="30" x2="120" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="240" y1="30" x2="270" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="330" y1="60" x2="330" y2="100" stroke="#333" stroke-width="2"/>
    <line x1="330" y1="100" x2="-290" y2="100" stroke="#333" stroke-width="2"/>
    <line x1="-290" y1="100" x2="-290" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <!-- 数据流图 -->
  <g transform="translate(400, 720)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">数据流图</text>
    
    <!-- 用户输入数据 -->
    <rect x="-300" y="0" width="120" height="60" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-240" y="35" font-family="Arial" font-size="14" text-anchor="middle">用户输入</text>
    
    <!-- 情感数据 -->
    <rect x="-150" y="0" width="120" height="60" rx="10" fill="#fff2cc" stroke="#faad14" stroke-width="2"/>
    <text x="-90" y="35" font-family="Arial" font-size="14" text-anchor="middle">情感数据</text>
    
    <!-- 对话历史 -->
    <rect x="0" y="0" width="120" height="60" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="60" y="35" font-family="Arial" font-size="14" text-anchor="middle">对话历史</text>
    
    <!-- 练习数据 -->
    <rect x="150" y="0" width="120" height="60" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="210" y="35" font-family="Arial" font-size="14" text-anchor="middle">练习数据</text>
    
    <!-- 响应数据 -->
    <rect x="300" y="0" width="120" height="60" rx="10" fill="#fff0f6" stroke="#eb2f96" stroke-width="2"/>
    <text x="360" y="35" font-family="Arial" font-size="14" text-anchor="middle">响应数据</text>
    
    <!-- 连接线 -->
    <line x1="-180" y1="30" x2="-150" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-30" y1="30" x2="0" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="120" y1="30" x2="150" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="270" y1="30" x2="300" y2="30" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-240" y1="-30" x2="-240" y2="-60" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="-240" y="-80" font-family="Arial" font-size="14" text-anchor="middle">用户</text>
    <line x1="360" y1="-30" x2="360" y2="-60" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="360" y="-80" font-family="Arial" font-size="14" text-anchor="middle">用户</text>
  </g>

  <!-- 情感分析流程图 -->
  <g transform="translate(400, 900)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">情感分析流程</text>
    
    <!-- 输入文本 -->
    <rect x="-300" y="0" width="100" height="50" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-250" y="25" font-family="Arial" font-size="14" text-anchor="middle">输入文本</text>
    
    <!-- 文本预处理 -->
    <rect x="-180" y="0" width="100" height="50" rx="10" fill="#fff2cc" stroke="#faad14" stroke-width="2"/>
    <text x="-130" y="25" font-family="Arial" font-size="14" text-anchor="middle">文本预处理</text>
    
    <!-- 情感识别 -->
    <rect x="-60" y="0" width="100" height="50" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="-10" y="25" font-family="Arial" font-size="14" text-anchor="middle">情感识别</text>
    
    <!-- 情感分类 -->
    <rect x="60" y="0" width="100" height="50" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="110" y="25" font-family="Arial" font-size="14" text-anchor="middle">情感分类</text>
    
    <!-- 结果输出 -->
    <rect x="180" y="0" width="100" height="50" rx="10" fill="#fff0f6" stroke="#eb2f96" stroke-width="2"/>
    <text x="230" y="25" font-family="Arial" font-size="14" text-anchor="middle">结果输出</text>
    
    <!-- 连接线 -->
    <line x1="-200" y1="25" x2="-180" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-80" y1="25" x2="-60" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="40" y1="25" x2="60" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="160" y1="25" x2="180" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <!-- 练习推荐流程图 -->
  <g transform="translate(400, 1050)">
    <text x="0" y="-40" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">练习推荐流程</text>
    
    <!-- 用户情感 -->
    <rect x="-300" y="0" width="100" height="50" rx="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="-250" y="25" font-family="Arial" font-size="14" text-anchor="middle">用户情感</text>
    
    <!-- 练习匹配 -->
    <rect x="-180" y="0" width="100" height="50" rx="10" fill="#fff2cc" stroke="#faad14" stroke-width="2"/>
    <text x="-130" y="25" font-family="Arial" font-size="14" text-anchor="middle">练习匹配</text>
    
    <!-- 练习选择 -->
    <rect x="-60" y="0" width="100" height="50" rx="10" fill="#e6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="-10" y="25" font-family="Arial" font-size="14" text-anchor="middle">练习选择</text>
    
    <!-- 练习介绍 -->
    <rect x="60" y="0" width="100" height="50" rx="10" fill="#f6ffed" stroke="#73d13d" stroke-width="2"/>
    <text x="110" y="25" font-family="Arial" font-size="14" text-anchor="middle">练习介绍</text>
    
    <!-- 推荐输出 -->
    <rect x="180" y="0" width="100" height="50" rx="10" fill="#fff0f6" stroke="#eb2f96" stroke-width="2"/>
    <text x="230" y="25" font-family="Arial" font-size="14" text-anchor="middle">推荐输出</text>
    
    <!-- 连接线 -->
    <line x1="-200" y1="25" x2="-180" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="-80" y1="25" x2="-60" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="40" y1="25" x2="60" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="160" y1="25" x2="180" y2="25" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <!-- 箭头标记定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>